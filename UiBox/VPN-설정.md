# VPN 설정

VPN; Virtual Private Network. 가상 보안망.

## 왜

내부망에서 돌아가는 서비스는 외부에서 접속할 수 없다.
내부망에 VPN을 구축하고 접속하면 외부에서도 내부망을 쓸 수 있다.

## 어떻게

ipTIME으로 구축하고 macOS로 접속할 때의 설정법.

### ipTIME에서

![](iptime-vpn.png)

설정 페이지에서 고급설정 → 특수기능 → VPN 서버설정에 들어가서
L2TP서버를 실행하고 비밀키를 정한다.

VPN 접속 계정 추가란에서 원하는 계정명과 암호를 설정하고, 어떤 IP를 할당받을
것인지 정한 후 추가를 누른다.

### macOS에서

![](macos-vpn-preference.png)

설정 → 네트워크에 들어가서 좌측 하단의 `+` 버튼을 눌러 인터페이스를 추가한다.
인터페이스로 `VPN`, VPN 유형으로 `IPSec을 통한 L2TP`를 입력하고 서비스 이름을
원하는 대로 추가한다.

추가한 인터페이스를 선택하고 우측 설정란에서 내 라우터의 서버 주소와
아까 설정한 계정 이름을 입력한다.

`인증 설정...` 버튼을 눌러 암호를 입력한다. 사용자 인증으로는 계정과 함께 설정하였던
암호를 입력하고, 시스템 인증으로는 L2TP 비밀키로 지정하였던 암호를 입력한다.

저장 후 연결을 누르면 정상적으로 접속된다.

## 추가 설정

가정용 라우터의 IP는 별다른 설정을 하지 않았다면 유동IP를 받게 된다.
유동IP도 IP가 바뀔 일은 별로 없지만 기억하기도 힘들고, 내가 모르게 바뀌면
곤란하므로 DDNS를 설정하는 것이 좋다.
